window.__require=function t(e,o,r){function c(i,a){if(!o[i]){if(!e[i]){var l=i.split("/");if(l=l[l.length-1],!e[l]){var s="function"==typeof __require&&__require;if(!a&&s)return s(l,!0);if(n)return n(l,!0);throw new Error("Cannot find module '"+i+"'")}i=l}var h=o[i]={exports:{}};e[i][0].call(h.exports,function(t){return c(e[i][1][t]||t)},h,h.exports,t,e,o,r)}return o[i].exports}for(var n="function"==typeof __require&&__require,i=0;i<r.length;i++)c(r[i]);return c}({game:[function(t,e,o){"use strict";cc._RF.push(e,"b3cdahV0q9K64813Q1WhL/0","game");var r,c=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,r){var c,n=arguments.length,i=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(i=(n<3?c(i):n>3?c(e,o,i):c(e,o))||i);return n>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i,a=cc._decorator,l=a.ccclass,s=a.property;(function(t){t.Idle="idle",t.Grow="grow",t.Rotate="rotate"})(i||(i={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockNode=null,e.scoreLabel=null,e.score=0,e.growTween=null,e.rotateTween=null,e.gameState=i.Idle,e.baseNodeArr=[],e.wallNodeArr=[],e}return c(e,t),e.prototype.onLoad=function(){this.node.on("touchstart",this.grow,this),this.node.on("touchend",this.stop,this),this.init()},e.prototype.onDestroy=function(){this.node.off("touchstart",this.grow,this),this.node.off("touchend",this.stop,this)},e.prototype.grow=function(){this.gameState===i.Idle&&(this.gameState=i.Grow,this.growTween=cc.tween(this.blockNode).to(1,{scale:4}).call(function(){}).start())},e.prototype.stop=function(){var t=this;this.gameState===i.Grow&&(this.gameState=i.Rotate,this.growTween&&(this.growTween.stop(),this.growTween=null),this.rotateTween=cc.tween(this.blockNode).to(.15,{angle:0}).call(function(){t.blockNode.width*t.blockNode.scaleX<=t.baseNodeArr[1].x-t.baseNodeArr[0].x?cc.tween(t.blockNode).to(.7,{x:0,y:-1e3}).call(function(){t.gameOver()}).start():t.blockNode.width*t.blockNode.scaleX<=t.wallNodeArr[1].x-t.wallNodeArr[0].x?t.bounce(!0):t.bounce(!1)}).start())},e.prototype.bounce=function(t){var e=this,o=-(cc.winSize.height/2-this.baseNodeArr[0].height-this.blockNode.width*this.blockNode.scaleX/2);t||(o+=this.wallNodeArr[0].height),cc.tween(this.blockNode).to(.7,{x:0,y:o},{easing:"bounceOut"}).call(function(){t?(e.updateScore(1),e.nextLevel()):e.gameOver()}).start()},e.prototype.gameOver=function(){cc.director.loadScene("game")},e.prototype.init=function(){this.scoreLabel.string=this.score.toString(),this.resetColor(),this.nextLevel()},e.prototype.nextLevel=function(){this.resetWall(),this.resetBlock(),this.gameState=i.Idle},e.prototype.placeWall=function(t,e){cc.tween(t).to(.5,{x:e},{easing:"quadOut"}).start()},e.prototype.resetWall=function(){var t=100+100*Math.random(),e=t+30+80*Math.random();this.placeWall(this.baseNodeArr[0],-t/2),this.placeWall(this.baseNodeArr[1],t/2),this.placeWall(this.wallNodeArr[0],-e/2),this.placeWall(this.wallNodeArr[1],e/2)},e.prototype.resetBlock=function(){var t=this;cc.tween(this.blockNode).parallel(cc.tween(this.blockNode).to(.5,{scale:-45}),cc.tween(this.blockNode).to(.5,{x:0,y:400}),cc.tween(this.blockNode).to(.5,{scale:1})).call(function(){t.gameState=i.Idle}).start()},e.prototype.updateScore=function(t){this.score+=t,this.scoreLabel.string=this.score.toString()},e.prototype.resetColor=function(){var t=["#4dc0d9","#f7766b","#f9c152","#9bd26a","#ad8bd6","#f7a8b8","#f7c174","#f9d9a6","#c7e5a2","#d6b0e0","#000000"],e=Math.floor(Math.random()*t.length);this.node.color=(new cc.Color).fromHEX(t[e])},n([s(cc.Node)],e.prototype,"blockNode",void 0),n([s(cc.Label)],e.prototype,"scoreLabel",void 0),n([s([cc.Node])],e.prototype,"baseNodeArr",void 0),n([s([cc.Node])],e.prototype,"wallNodeArr",void 0),n([l("Game")],e)}(cc.Component);o.default=h,cc._RF.pop()},{}]},{},["game"]);